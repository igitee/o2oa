MWF.xScript=MWF.xScript||{};MWF.xScript.Environment=function(n){var t=n.data;var f=n.form;var r=n.forms;this.library=COMMON;var i=function(t){return new MWF.xScript.JSONData(t,function(t,n,e){var i={getKey:function(){return n},getParent:function(){return e}};while(i&&!r[i.getKey()])i=i.getParent();if(i)if(i.getKey())if(r[i.getKey()])r[i.getKey()].resetData()})};this.setData=function(t){this.data=i(t);this.data.save=function(t){form.workAction.saveData(function(){if(t)t()}.bind(this),null,work.id,jData)}};this.setData(t);this.workContext={getTask:function(){return n.task||null},getWork:function(){debugger;return n.work||n.workCompleted},getActivity:function(){return n.activity||null},getTaskList:function(){return n.taskList},getReadList:function(){return n.readList},getTaskCompletedList:function(){return n.taskCompletedList},getControl:function(){return n.control},getWorkLogList:function(){return n.workLogList},getAttachmentList:function(){return n.attachmentList},getRouteList:function(){return n.task?n.task.routeNameList:null},getInquiredRouteList:function(){return null},setTitle:function(t){if(!this.workAction){MWF.require("MWF.xScript.Actions.WorkActions",null,false);this.workAction=new MWF.xScript.Actions.WorkActions}this.workAction.setTitle(n.work.id,{title:t})}};this.workContent=this.workContext;var a=function(t){if(t){t.creatorPersonDn=t.creatorPerson||"";t.creatorUnitDn=t.creatorUnit||"";t.creatorUnitDnList=t.creatorUnitList||"";t.creatorIdentityDn=t.creatorIdentity||"";var n={creatorPerson:{get:function(){return this.creatorPersonDn.substring(0,this.creatorPersonDn.indexOf("@"))}},creatorUnit:{get:function(){return this.creatorUnitDn.substring(0,this.creatorUnitDn.indexOf("@"))}},creatorDepartment:{get:function(){return this.creatorUnitDn.substring(0,this.creatorUnitDn.indexOf("@"))}},creatorIdentity:{get:function(){return this.creatorIdentityDn.substring(0,this.creatorIdentityDn.indexOf("@"))}},creatorCompany:{get:function(){if(this.creatorUnitLevel){var t=this.creatorUnitLevel.split("/");return t[0]}else{return this.creatorUnitDn.substring(0,this.creatorUnitDn.indexOf("@"))}}}};MWF.defineProperties(t,n)}return t};var o=function(t){if(t){t.personDn=t.person||"";t.unitDn=t.unit||"";t.unitDnList=t.unitList||"";t.identityDn=t.identity||"";var n={person:{get:function(){return this.personDn.substring(0,this.personDn.indexOf("@"))}},unit:{get:function(){return this.unitDn.substring(0,this.unitDn.indexOf("@"))}},department:{get:function(){return this.unitDn.substring(0,this.unitDn.indexOf("@"))}},identity:{get:function(){return this.identityDn.substring(0,this.identityDn.indexOf("@"))}},company:{get:function(){return this.unitList[0]}}};MWF.defineProperties(t,n)}return t};a(this.workContext.getWork());o(a(this.workContext.getTask()));this.Dict=MWF.xScript.createDict(f.json.application);var s=null;var u=function(){if(!s){MWF.require("MWF.xScript.Actions.UnitActions",null,false);s=new MWF.xScript.Actions.UnitActions}};var l=function(t){var n=typeOf(t);if(n==="array"){var e=[];t.each(function(t){e.push(typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t)});return e}else{return[n==="object"?t.distinguishedName||t.id||t.unique||t.name:t]}};this.org={getGroup:function(t){u();var n={groupList:l(t)};var e=null;s.listGroup(n,function(t){e=t.data},null,false);return e&&e.length===1?e[0]:e},listSubGroup:function(t,n){u();var e={groupList:l(t)};var i=null;if(n){s.listSubGroupNested(e,function(t){i=t.data},null,false)}else{s.listSubGroupDirect(e,function(t){i=t.data},null,false)}return i},listSupGroup:function(t,n){u();var e={groupList:l(t)};var i=null;if(n){s.listSupGroupNested(e,function(t){i=t.data},null,false)}else{s.listSupGroupDirect(e,function(t){i=t.data},null,false)}return i},listGroupWithPerson:function(t){u();var n={personList:l(t)};var e=null;s.listGroupWithPerson(n,function(t){e=t.data},null,false);return e},groupHasRole:function(t,n){u();nameFlag=typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t;var e={group:nameFlag,roleList:l(n)};var i=false;s.groupHasRole(e,function(t){i=t.data.value},null,false);return i},getRole:function(t){u();var n={roleList:l(t)};var e=null;s.listRole(n,function(t){e=t.data},null,false);return e&&e.length===1?e[0]:e},listRoleWithPerson:function(t){u();var n={personList:l(t)};var e=null;s.listRoleWithPerson(n,function(t){e=t.data},null,false);return e},personHasRole:function(t,n){u();nameFlag=typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t;var e={person:nameFlag,roleList:l(n)};var i=false;s.personHasRole(e,function(t){i=t.data.value},null,false);return i},getPerson:function(t){u();var n={personList:l(t)};var e=null;s.listPerson(n,function(t){e=t.data},null,false);return e&&e.length===1?e[0]:e},listSubPerson:function(t,n){u();var e={personList:l(t)};var i=null;if(n){s.listPersonSubNested(e,function(t){i=t.data},null,false)}else{s.listPersonSubDirect(e,function(t){i=t.data},null,false)}return i},listSupPerson:function(t,n){u();var e={personList:l(t)};var i=null;if(n){s.listPersonSupNested(e,function(t){i=t.data},null,false)}else{s.listPersonSupDirect(e,function(t){i=t.data},null,false)}return i},listPersonWithGroup:function(t){u();var n={groupList:l(t)};var e=null;s.listPersonWithGroup(n,function(t){e=t.data},null,false);return e},listPersonWithRole:function(t){u();var n={roleList:l(t)};var e=null;s.listPersonWithRole(n,function(t){e=t.data},null,false);return e},listPersonWithIdentity:function(t){u();var n={identityList:l(t)};var e=null;s.listPersonWithIdentity(n,function(t){e=t.data},null,false);return e},getPersonWithIdentity:function(t){u();var n={identityList:l(t)};var e=null;s.listPersonWithIdentity(n,function(t){e=t.data},null,false);return e&&e.length===1?e[0]:e},listPersonWithUnit:function(t,n){u();var e={unitList:l(t)};var i=null;if(n){s.listPersonWithUnitNested(e,function(t){i=t.data},null,false)}else{s.listPersonWithUnitDirect(e,function(t){i=t.data},null,false)}return i},appendPersonAttribute:function(t,n,e){u();var i=typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t;var r={attributeList:e,name:n,person:i};s.appendPersonAttribute(r,function(t){if(t.data.value){if(success)success()}else{if(failure)failure(null,"","append values failed")}},function(t,n,e){if(failure)failure(t,n,e)},false)},setPersonAttribute:function(t,n,e){u();var i=typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t;var r={attributeList:e,name:n,person:i};s.setPersonAttribute(r,function(t){if(t.data.value){if(success)success()}else{if(failure)failure(null,"","append values failed")}},function(t,n,e){if(failure)failure(t,n,e)},false)},getPersonAttribute:function(t,n){u();var e=typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t;var i={name:n,person:e};var r=null;s.getPersonAttribute(i,function(t){r=t.data.attributeList},null,false);return r},listPersonAttributeName:function(t){u();var n={personList:l(t)};var e=null;s.listPersonAttributeName(n,function(t){e=t.data.nameList},null,false);return e},listPersonAllAttribute:function(t){u();var n={personList:l(t)};var e=null;s.listPersonAllAttribute(n,function(t){e=t.data},null,false);return e},getIdentity:function(t){u();var n={identityList:l(t)};var e=null;s.listIdentity(n,function(t){e=t.data},null,false);return e&&e.length===1?e[0]:e},listIdentityWithPerson:function(t){u();var n={personList:l(t)};var e=null;s.listIdentityWithPerson(n,function(t){e=t.data},null,false);return e},listIdentityWithUnit:function(t,n){u();var e={unitList:l(t)};var i=null;if(n){s.listIdentityWithUnitNested(e,function(t){i=t.data},null,false)}else{s.listIdentityWithUnitDirect(e,function(t){i=t.data},null,false)}return i},getUnit:function(t){u();var n={unitList:l(t)};var e=null;s.listUnit(n,function(t){e=t.data},null,false);return e&&e.length===1?e[0]:e},listSubUnit:function(t,n){u();var e={unitList:l(t)};var i=null;if(n){s.listUnitSubNested(e,function(t){i=t.data},null,false)}else{s.listUnitSubDirect(e,function(t){i=t.data},null,false)}return i},listSupUnit:function(t,n){u();var e={unitList:l(t)};var i=null;if(n){s.listUnitSupNested(e,function(t){i=t.data},null,false)}else{s.listUnitSupDirect(e,function(t){i=t.data},null,false)}return i},getUnitByIdentity:function(t,n){u();var e="current";var i;if(n){if(typeOf(n)==="string")e="type";if(typeOf(n)==="number")e="level"}switch(e){case"current":var r={identityList:l(t)};s.f(r,function(t){i=t.data},null,false);break;case"type":var r={identity:typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t,type:n};s.getUnitWithIdentityAndType(r,function(t){i=t.data},null,false);break;case"level":var r={identity:typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t,level:n};s.getUnitWithIdentityAndLevel(r,function(t){i=t.data},null,false);break}return i},listAllSupUnitWithIdentity:function(t){u();var n={identityList:l(t)};var e=null;s.listUnitSupNestedWithIdentity(n,function(t){e=t.data},null,false);return e},listUnitWithPerson:function(t){u();var n={personList:l(t)};var e=null;s.listUnitWithPerson(n,function(t){e=t.data},null,false);return e},listAllSupUnitWithPerson:function(t){u();var n={personList:l(t)};var e=null;s.listUnitSupNestedWithPerson(n,function(t){e=t.data},null,false);return e},listUnitWithAttribute:function(t,n){u();var e={name:t,attribute:n};var i=null;s.listUnitWithAttribute(e,function(t){i=t.data},null,false);return i},listUnitWithDuty:function(t,n){u();var e={name:t,identity:typeOf(n)==="object"?n.distinguishedName||n.id||n.unique||n.name:n};var i=null;s.listUnitWithDuty(e,function(t){i=t.data},null,false);return i},getDuty:function(t,n){u();var e={name:t,unit:typeOf(n)==="object"?n.distinguishedName||n.id||n.unique||n.name:n};var i=null;s.getDuty(e,function(t){i=t.data},null,false);return i},listDutyNameWithIdentity:function(t){u();var n={identityList:l(t)};var e=null;s.listDutyNameWithIdentity(n,function(t){e=t.data.nameList},null,false);return e},listDutyNameWithUnit:function(t){u();var n={unitList:l(t)};var e=null;s.listDutyNameWithUnit(n,function(t){e=t.data.nameList},null,false);return e},listUnitAllDuty:function(t){u();var n={unitList:l(t)};var e=null;s.listUnitAllDuty(n,function(t){e=t.data},null,false);return e},listTopUnit:function(){var t=MWF.Actions.get("x_organization_assemble_control");var n=null;t.listTopUnit(function(t){n=t.data},null,false);return n},appendUnitAttribute:function(t,n,e){u();var i=typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t;var r={attributeList:e,name:n,unit:i};s.appendUnitAttribute(r,function(t){if(t.data.value){if(success)success()}else{if(failure)failure(null,"","append values failed")}},function(t,n,e){if(failure)failure(t,n,e)},false)},setUnitAttribute:function(t,n,e){u();var i=typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t;var r={attributeList:e,name:n,unit:i};s.setUnitAttribute(r,function(t){if(t.data.value){if(success)success()}else{if(failure)failure(null,"","append values failed")}},function(t,n,e){if(failure)failure(t,n,e)},false)},getUnitAttribute:function(t,n){u();var e=typeOf(t)==="object"?t.distinguishedName||t.id||t.unique||t.name:t;var i={name:n,unit:e};var r=null;s.getUnitAttribute(i,function(t){r=t.data.attributeList},null,false);return r},listUnitAttributeName:function(t){u();var n={unitList:l(t)};var e=null;s.listUnitAttributeName(n,function(t){e=t.data.nameList},null,false);return e},listUnitAllAttribute:function(t){u();var n={unitList:l(t)};var e=null;s.listUnitAllAttribute(n,function(t){e=t.data},null,false);return e}};this.Action=function(){var i=[];return function(t,n){var e=i[t]||(i[t]=new MWF.xDesktop.Actions.RestActions("",t,""));e.getActions=function(t){if(!this.actions)this.actions={};Object.merge(this.actions,n);if(t)t()};this.invoke=function(t){e.invoke(t)}}}();this.service={jaxwsClient:{},jaxrsClient:{}};var c=null;var p=function(t){if(!c){MWF.require("MWF.xDesktop.Actions.RestActions",function(){c=new MWF.xDesktop.Actions.RestActions("","x_processplatform_assemble_surface","");c.getActions=function(t){this.actions={lookup:{uri:"/jaxrs/queryview/flag/{view}/application/flag/{application}/execute",method:"PUT"},getView:{uri:"/jaxrs/queryview/flag/{view}/application/flag/{application}"}};if(t)t()};if(t)t()})}else{if(t)t()}};this.view={lookup:function(t,e){p(function(){c.invoke({name:"lookup",async:true,parameter:{view:t.view,application:t.application},success:function(t){var n={grid:t.data.grid,groupGrid:t.data.groupGrid};if(e)e(n)}.bind(this)})}.bind(this))},select:function(t,i,r){if(t.view){var a={application:t.application||f.json.application,viewName:t.view||"",isTitle:t.isTitle||"yes",select:t.select||"multi",title:t.title||"Select View"};if(!r)r={};var o=r.width||"700";var s=r.height||"400";var n;if(layout.mobile){n=document.body.getSize();o=n.x;s=n.y;r.style="viewmobile"}o=o.toInt();s=s.toInt();n=f.app.content.getSize();var u=(n.x-o)/2;var l=(n.y-s)/2;if(u<0)u=0;if(l<0)l=0;if(layout.mobile){u=20;l=0}var c=this;MWF.require("MWF.xDesktop.Dialog",function(){var t=new MWF.xDesktop.Dialog({title:a.title||"select view",style:r.style||"view",top:l,left:u-20,fromTop:l,fromLeft:u-20,width:o,height:s,html:"<div style='height: 100%;'></div>",maskNode:f.app.content,container:f.app.content,buttonList:[{text:MWF.LP.process.button.ok,action:function(){if(i)i(c.view.getData());this.close()}},{text:MWF.LP.process.button.cancel,action:function(){this.close()}}]});t.show();if(layout.mobile){var n=t.node.getElement(".MWF_dialod_Action_back");var e=t.node.getElement(".MWF_dialod_Action_ok");if(n)n.addEvent("click",function(){t.close()}.bind(this));if(e)e.addEvent("click",function(){if(i)i(this.view.getData());t.close()}.bind(this))}MWF.xDesktop.requireApp("query.Query","Viewer",function(){this.view=new MWF.xApplication.query.Query.Viewer(t.content.getFirst(),a,{style:"select"})}.bind(this))}.bind(this))}}};if(!window.includedScripts){var d=window.includedScripts=[]}else{var d=window.includedScripts}this.include=function(t,n){var e=t;if(typeOf(e)=="string"){e={name:e}}var i=e.name;var r=e.type&&e.application?e.type:"process";var a=e.application||f.json.application;if(d.indexOf(i)>-1){if(n)n.apply(this);return}var o;switch(r){case"portal":if(this.scriptActionPortal){o=this.scriptActionPortal}else{MWF.require("MWF.xScript.Actions.PortalScriptActions",null,false);o=this.scriptActionPortal=new MWF.xScript.Actions.PortalScriptActions}break;case"process":if(this.scriptActionProcess){o=this.scriptActionProcess}else{MWF.require("MWF.xScript.Actions.ScriptActions",null,false);o=this.scriptActionProcess=new MWF.xScript.Actions.ScriptActions}break;case"cms":if(this.scriptActionCMS){o=this.scriptActionCMS}else{MWF.require("MWF.xScript.Actions.CMSScriptActions",null,false);o=this.scriptActionCMS=new MWF.xScript.Actions.CMSScriptActions}break}o.getScriptByName(a,i,d,function(t){if(t.data){d=d.concat(t.data.importedList);MWF.Macro.exec(t.data.text,this);if(n)n.apply(this)}else{if(n)n.apply(this)}}.bind(this),null,false)};this.define=function(t,n,e){var i=true;if(e===false)i=false;var r={};r[t]={value:n,configurable:i};MWF.defineProperties(this,r)}.bind(this);this.form={getInfor:function(){return n.formInfor},infor:n.formInfor,getApp:function(){return f.app},app:f.app,node:function(){return f.node},readonly:f.options.readonly,get:function(t){return f.all?f.all[t]:null},getField:function(t){return r[t]},getAction:function(){return f.workAction},getDesktop:function(){return f.app.desktop},getData:function(){return new MWF.xScript.JSONData(f.getData())},save:function(t){f.saveWork(t)},close:function(){f.closeWork()},process:function(t){if(t){f.submitWork(t.routeName,t.opinion,null,t.callback)}else{f.processWork()}},reset:function(t){if(!t){if(f.businessData.control["allowReset"])f.resetWork()}else{f.resetWorkToPeson(t.names,t.opinion,opinion.success,opinion.failure)}},retract:function(t){if(!t){if(f.businessData.control["allowRetract"])f.retractWork()}else{f.doRetractWork(opinion.success,opinion.failure)}},print:function(t,n){if(arguments.length){var e=arguments.length>1?arguments[0]:null;var i=arguments.length>1?arguments[1]:arguments[0];f.printWork(e,i)}else{f.printWork()}},deleteWork:function(t){if(!t){if(f.businessData.control["allowDeleteWork"])f.deleteWork()}else{f.doDeleteWork(opinion.success,opinion.failure)}},confirm:function(t,n,i,r,a,o,s,u){var l=MWF.getCenter({x:r,y:a});e={event:{clientX:l.x,x:l.x,clientY:l.y,y:l.y}};f.confirm(t,e,n,i,r,a,o,s,u)},notice:function(t,n,e,i){f.notice(t,n,e,i)},addEvent:function(t,n){f.addEvent(t,n)},openWindow:function(t,n){if(arguments.length){var e=arguments.length>1?arguments[0]:null;var i=arguments.length>1?arguments[1]:arguments[0];f.openWindow(i,e)}else{f.openWindow()}},openWork:function(t,n,e,i){var r=i||{};r.workId=t;r.workCompletedId=n;r.docTitle=e;r.appId="process.Work"+(r.workId||r.workCompletedId);layout.desktop.openApplication(this.event,"process.Work",r)},openDocument:function(t,n,e){var i=e||{};i.documentId=t;i.docTitle=n;layout.desktop.openApplication(this.event,"cms.Document",i)},openPortal:function(t,e,i){var r=MWF.Actions.get("x_portal_assemble_surface");r.getApplication(t,function(n){if(n.data){if(e){r.getPageByName(e,n.data.id,function(t){layout.desktop.openApplication(null,"portal.Portal",{portalId:n.data.id,pageId:t.data?t.data.id:"",parameters:i,appId:"portal.Portal"+n.data.id})})}else{layout.desktop.openApplication(null,"portal.Portal",{portalId:n.data.id,parameters:i,appId:"portal.Portal"+n.data.id})}}})},openCMS:function(t){var n=MWF.Actions.get("x_cms_assemble_control");n.getColumn(t,function(t){if(t.data){layout.desktop.openApplication(null,"cms.Module",{columnId:t.data.id,appId:"cms.Module"+t.data.id})}})},openProcess:function(t){var n=MWF.Actions.get("x_processplatform_assemble_surface");n.getApplication(t,function(t){if(t.data){layout.desktop.openApplication(null,"process.Application",{id:t.data.id,appId:"process.Application"+t.data.id})}})},openApplication:function(t,n){layout.desktop.openApplication(null,t,n)},createDocument:function(t,n,e,i,r,a,o,s,u){var l=t;if(typeOf(t)=="object"){l=t.column;n=t.category;e=t.data;i=t.identity;r=t.callback;a=t.target;o=t.latest;s=t.selectColumnEnable;u=t.ignoreTitle}if(a){if(layout.app&&layout.app.inBrowser){layout.app.content.empty();layout.app=null}}MWF.xDesktop.requireApp("cms.Index","Newer",function(){var t=new MWF.xApplication.cms.Index.Newer(null,null,f.app,null,{documentData:e,identity:i,ignoreTitle:u===true,ignoreDrafted:o===false,selectColumnEnable:!n||s===true,restrictToColumn:!!n&&s!==true,categoryFlag:n,columnFlag:l,onStarted:function(t,n){if(r)r()},onPostLoad:function(){},onPostPublish:function(){}});t.load()})},startProcess:function(t,n,e,i,a,r,o){if(arguments.length>2){for(var s=2;s<arguments.length;s++){if(typeOf(arguments[s])=="boolean"){r=arguments[s];break}}}if(r){if(layout.app&&layout.app.inBrowser){layout.app.content.empty();layout.app=null}}var u=MWF.Actions.get("x_processplatform_assemble_surface").getProcessByName(n,t,function(n){if(n.data){MWF.xDesktop.requireApp("process.TaskCenter","ProcessStarter",function(){var t=new MWF.xApplication.process.TaskCenter.ProcessStarter(n.data,f.app,{workData:e,identity:i,latest:o,onStarted:function(t,n,e){debugger;var i=[];t.each(function(t){if(t.currentTaskIndex!=-1)i.push(t.taskList[t.currentTaskIndex].work)}.bind(this));if(i.length==1){var r={workId:i[0],appId:i[0]};layout.desktop.openApplication(null,"process.Work",r)}else{}if(a)a(t)}.bind(this)});t.load()}.bind(this))}})}};this.form.currentRouteName=f.json.currentRouteName;this.form.opinion=f.json.opinion;this.target=n.target;this.event=n.event;this.status=n.status;this.session=layout.desktop.session};MWF.xScript.JSONData=function(o,s,i,r){var u=function(t,n,e,i){return function(){return["array","object"].indexOf(typeOf(t[e]))===-1?t[e]:new MWF.xScript.JSONData(t[e],n,e,i)}};var l=function(n,e,i,r){return function(t){n[i]=t;if(e)e(n,i,r)}};var t=function(){var t={};for(var n in o)t[n]={configurable:true,enumerable:true,get:u.apply(this,[o,s,n,this]),set:l.apply(this,[o,s,n,this])};t["length"]={get:function(){return Object.keys(o).length}};MWF.defineProperties(this,t);var e={getKey:{value:function(){return i}},getParent:{value:function(){return r}},toString:{value:function(){return o.toString()}},add:{value:function(t,n,e){var i=true;var r=typeOf(o);if(r==="array"){if(arguments.length<2){o.push(t);n=t;t=o.length-1}else{if(!t&&t!==0){o.push(n);t=o.length-1}else{i=false}}if(i){var a={};a[t]={configurable:true,enumerable:true,get:u.apply(this,[o,s,t,this]),set:l.apply(this,[o,s,t,this])};MWF.defineProperties(this,a)}this[t]=n}else if(r==="object"){if(!this.hasOwnProperty(t)){o[t]=n;if(i){var a={};a[t]={configurable:true,enumerable:true,get:u.apply(this,[o,s,t,this]),set:l.apply(this,[o,s,t,this])};MWF.defineProperties(this,a)}this[t]=n}else{if(e)this[t]=n}}return this[t]}},del:{value:function(t){if(!this.hasOwnProperty(t))return null;delete o[newKey];delete this[newKey];return this}}};MWF.defineProperties(this,e)};var n=typeOf(o);if(n==="object"||n==="array")t.apply(this)};MWF.xScript.createDict=function(i){return function(t){var n=t;if(typeOf(n)=="string"){n={name:n}}var e=this.name=n.name;var a=n.type&&n.application?n.type:"process";var o=n.application||i;var s=n.enableAnonymous||false;if(a=="cms"){var u=MWF.Actions.get("x_cms_assemble_control")}else{var u=MWF.Actions.get("x_processplatform_assemble_surface")}var l=function(t){var n=t.split(/\./g);var e=n.map(function(t){return encodeURIComponent(t)});return e.join("/")};this.get=function(t,n,i){debugger;var e=null;if(t){var r=l(t);u[s&&a=="cms"?"getDictDataAnonymous":"getDictData"](encodeURIComponent(this.name),o,r,function(t){e=t.data;if(n)n(t.data)},function(t,n,e){if(i)i(t,n,e)},false)}else{u[s&&a=="cms"?"getDictRootAnonymous":"getDictRoot"](encodeURIComponent(this.name),o,function(t){e=t.data;if(n)n(t.data)},function(t,n,e){if(i)i(t,n,e)},false)}return e};this.set=function(t,n,e,i){var r=l(t);u.setDictData(encodeURIComponent(this.name),o,r,n,function(t){if(e)e(t.data)},function(t,n,e){if(i)i(t,n,e)})};this.add=function(t,n,e,i){var r=l(t);u.addDictData(encodeURIComponent(this.name),o,r,n,function(t){if(e)e(t.data)},function(t,n,e){if(i)i(t,n,e)})};this["delete"]=function(t,n,i){var e=l(t);u.deleteDictData(encodeURIComponent(this.name),o,e,function(t){if(n)n(t.data)},function(t,n,e){if(i)i(t,n,e)})};this.destory=this["delete"]}};